schema: '2.0'
stages:
  join:
    cmd: "lyscripts data join --inputs data/2023-isb-multisite.csv data/2023-clb-multisite.csv
      --output data/joined.csv\n"
    deps:
    - path: data/2023-clb-multisite.csv
      md5: 5de121d6d64e39c251a860f47a153e75
      size: 123834
    - path: data/2023-isb-multisite.csv
      md5: 79dd72d92f6a1817f98fbc406d139ae9
      size: 188268
    outs:
    - path: data/joined.csv
      md5: 23f691417041b7432c4fa7300155200d
      size: 358593
  enhance:
    cmd: "lyscripts data enhance data/joined.csv data/enhanced.csv --modalities CT
      MRI PET FNA diagnostic_consensus pathology pCT\n"
    deps:
    - path: data/joined.csv
      md5: 23f691417041b7432c4fa7300155200d
      size: 358593
    params:
      params.yaml:
        modalities:
          CT:
          - 0.76
          - 0.81
          MRI:
          - 0.63
          - 0.81
          PET:
          - 0.86
          - 0.79
          FNA:
          - 0.98
          - 0.8
          diagnostic_consensus:
          - 0.86
          - 0.81
          pathology:
          - 1.0
          - 1.0
          pCT:
          - 0.86
          - 0.81
          max_llh:
          - 1.0
          - 1.0
    outs:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
  statistics:
    cmd: ".venv/bin/python scripts/statistics.py\n"
    deps:
    - path: data/enhanced.csv
      md5: c11857f2f4ebfa770ee2ff5628d69f0d
      size: 458572
    - path: scripts/statistics.py
      md5: fc53b4a142364b88da3ace48d55e2aeb
      size: 11756
    outs:
    - path: figures/statistics.png
      md5: 8ee419375b8fd843aa66d538dfae271b
      size: 224157
  copy:
    cmd: "bash copy.sh\n"
    deps:
    - path: copy.sh
      md5: 8f2f11ed8419c435154e665ba6f6d00a
      size: 794
    - path: figures
      md5: bee2e38609702ab40c6018d79f3e1eb6.dir
      size: 405948
      nfiles: 6
    - path: tables
      md5: 95b7270b3529e18520b117d6b8ec3a71.dir
      size: 902
      nfiles: 3
  contra-involvement-table:
    cmd: ".venv/bin/python scripts/contra_involvement.py\n"
    deps:
    - path: data/enhanced.csv
      md5: c11857f2f4ebfa770ee2ff5628d69f0d
      size: 458572
    - path: scripts/contra_involvement.py
      md5: 6a369719f0b729e82bf223388ec1eeb8
      size: 2116
    outs:
    - path: tables/contra_involvement.csv
      md5: 8b92ff1820277cf6247c7be0b271a4d7
      size: 639
  tables@contra_involvement:
    cmd: "python scripts/contra_involvement.py\n"
    deps:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
    - path: scripts/contra_involvement.py
      md5: 686dbabbd13bea735d4105d3623f0467
      size: 1689
    outs:
    - path: tables/contra_involvement.csv
      md5: f9ebb649087a6efb2f3136c6afe83451
      size: 639
  figures@statistics:
    cmd: "python scripts/statistics.py\n"
    deps:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
    - path: scripts/statistics.py
      md5: a6f04e8371cde2665ddd0598ecab9227
      size: 10914
    outs:
    - path: figures/statistics.png
      md5: 7484edd71c94b2dbbe6561955f172ed6
      size: 221932
  figures@venn_diagram:
    cmd: "python scripts/venn_diagram.py\n"
    deps:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
    - path: scripts/venn_diagram.py
      md5: 70f7fffb093619080a8f7f469e397f1f
      size: 1911
    outs:
    - path: figures/venn_diagram.png
      md5: bc51c8feadba570c14609f7a28af8f88
      size: 77344
  tables@ece_data:
    cmd: "python scripts/ece_data.py\n"
    deps:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
    - path: scripts/ece_data.py
      md5: 3fe6b4d1ee3bad3a594b695a22554303
      size: 1381
    outs:
    - path: tables/ece_data.csv
      md5: 4bcfb44a048a115afe61582b9f0319f7
      size: 225
  logistic-regression:
    cmd: ".venv/bin/python scripts/logistic_regression.py\n"
    deps:
    - path: data/lymph_nodes_invest_OC.csv
      md5: bbe7e3def57cbb40358e4cc01197963e
      size: 25487
    - path: scripts/logistic_regression.py
      md5: 978d1404475e4dca7766d2e76932d1b6
      size: 5229
    outs:
    - path: figures/Log_ROC.svg
      md5: 140ab8a0f46e750c83d8beedc2f60931
      size: 30934
    - path: figures/confusion_matrix.png
      md5: a1b25fc36b98479173504356ffdf5c7b
      size: 30271
    - path: figures/confusionmat_lymphsize_hist.png
      md5: f13f2be6a0bd64cf081e07465befc5b1
      size: 53804
  figures@ece_stacked_bar:
    cmd: "python scripts/ece_stacked_bar.py\n"
    deps:
    - path: data/enhanced.csv
      md5: 6e4994dd0d3a7c18eb31fd61ae32a79b
      size: 459258
    - path: scripts/ece_stacked_bar.py
      md5: 0acaa22d0cee61067329e79a08ab3661
      size: 4630
    outs:
    - path: figures/ece_stacked_bar.png
      md5: 3a548c600841593e852b2133b504d841
      size: 59511
