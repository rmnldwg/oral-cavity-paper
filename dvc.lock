schema: '2.0'
stages:
  join:
    cmd: "lyscripts data join --inputs data/2023-isb-multisite.csv data/2023-clb-multisite.csv
      --output data/joined.csv\n"
    deps:
    - path: data/2023-clb-multisite.csv
      hash: md5
      md5: 9d72ee96af2c51033a2fb0bb8551e318
      size: 123938
    - path: data/2023-isb-multisite.csv
      hash: md5
      md5: c3b5e57e4e7e139a630eab6505986b51
      size: 190110
    outs:
    - path: data/joined.csv
      hash: md5
      md5: 747c69ca353ae2967c3d9fa5d258e6ab
      size: 359633
  enhance:
    cmd: "lyscripts data enhance data/joined.csv data/enhanced.csv --modalities CT
      MRI PET FNA diagnostic_consensus pathology pCT\n"
    deps:
    - path: data/joined.csv
      hash: md5
      md5: 747c69ca353ae2967c3d9fa5d258e6ab
      size: 359633
    params:
      params.yaml:
        modalities:
          CT:
          - 0.76
          - 0.81
          MRI:
          - 0.63
          - 0.81
          PET:
          - 0.86
          - 0.79
          FNA:
          - 0.98
          - 0.8
          diagnostic_consensus:
          - 0.86
          - 0.81
          pathology:
          - 1.0
          - 1.0
          pCT:
          - 0.86
          - 0.81
          max_llh:
          - 1.0
          - 1.0
    outs:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
  statistics:
    cmd: ".venv/bin/python scripts/statistics.py\n"
    deps:
    - path: data/enhanced.csv
      md5: c11857f2f4ebfa770ee2ff5628d69f0d
      size: 458572
    - path: scripts/statistics.py
      md5: fc53b4a142364b88da3ace48d55e2aeb
      size: 11756
    outs:
    - path: figures/statistics.png
      md5: 8ee419375b8fd843aa66d538dfae271b
      size: 224157
  copy:
    cmd: "bash copy.sh\n"
    deps:
    - path: copy.sh
      hash: md5
      md5: 8f2f11ed8419c435154e665ba6f6d00a
      size: 794
    - path: figures
      hash: md5
      md5: 54ca30a6fef9b57a7d0a56c7a28a4ec8.dir
      size: 546578
      nfiles: 5
    - path: tables
      hash: md5
      md5: 489efb07427b18671cb0295ba808a587.dir
      size: 2203
      nfiles: 4
  contra-involvement-table:
    cmd: ".venv/bin/python scripts/contra_involvement.py\n"
    deps:
    - path: data/enhanced.csv
      md5: c11857f2f4ebfa770ee2ff5628d69f0d
      size: 458572
    - path: scripts/contra_involvement.py
      md5: 6a369719f0b729e82bf223388ec1eeb8
      size: 2116
    outs:
    - path: tables/contra_involvement.csv
      md5: 8b92ff1820277cf6247c7be0b271a4d7
      size: 639
  tables@contra_involvement:
    cmd: "python scripts/contra_involvement.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/contra_involvement.py
      hash: md5
      md5: 2117e407183da5ed4adb6c6742654219
      size: 1809
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: tables/contra_involvement.csv
      hash: md5
      md5: 73a448dba414ee9d8420afb40ad48793
      size: 833
  figures@statistics:
    cmd: "python scripts/statistics.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/statistics.py
      hash: md5
      md5: a6f04e8371cde2665ddd0598ecab9227
      size: 10914
    outs:
    - path: figures/statistics.png
      hash: md5
      md5: 12b60eafb5964d874afa2ee61b8af3d0
      size: 221932
  figures@venn_diagram:
    cmd: "python scripts/venn_diagram.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/venn_diagram.py
      hash: md5
      md5: 70f7fffb093619080a8f7f469e397f1f
      size: 1911
    outs:
    - path: figures/venn_diagram.png
      hash: md5
      md5: c6260bb1a69b06445f8759afa496e905
      size: 77280
  tables@ece_data:
    cmd: "python scripts/ece_data.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/ece_data.py
      hash: md5
      md5: 3fe6b4d1ee3bad3a594b695a22554303
      size: 1381
    outs:
    - path: tables/ece_data.csv
      hash: md5
      md5: 4bcfb44a048a115afe61582b9f0319f7
      size: 225
  logistic-regression:
    cmd: ".venv/bin/python scripts/logistic_regression.py\n"
    deps:
    - path: data/lymph_nodes_invest_OC.csv
      md5: bbe7e3def57cbb40358e4cc01197963e
      size: 25487
    - path: scripts/logistic_regression.py
      md5: 978d1404475e4dca7766d2e76932d1b6
      size: 5229
    outs:
    - path: figures/Log_ROC.svg
      md5: 140ab8a0f46e750c83d8beedc2f60931
      size: 30934
    - path: figures/confusion_matrix.png
      md5: a1b25fc36b98479173504356ffdf5c7b
      size: 30271
    - path: figures/confusionmat_lymphsize_hist.png
      md5: f13f2be6a0bd64cf081e07465befc5b1
      size: 53804
  figures@ece_stacked_bar:
    cmd: "python scripts/ece_stacked_bar.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/ece_stacked_bar.py
      hash: md5
      md5: ff54d09dd918a689231f990aec110d95
      size: 4581
    outs:
    - path: figures/ece_stacked_bar.png
      hash: md5
      md5: b13f4577b0fae2af30ec34b374cde76d
      size: 77888
  figures_lymph_invest@lymph_invest:
    cmd: "python scripts/lymph_invest.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: c4a74afa0a1b2248763b911e48fa2133
      size: 456854
    - path: scripts/lymph_invest.py
      hash: md5
      md5: eeef01bed4035a81c67bb3272f1a8da2
      size: 26589
  pvalues_lymph_invest@lymph_invest_pvalues:
    cmd: "python scripts/lymph_invest_pvalues.py\n"
    deps:
    - path: scripts/lymph_invest_pvalues.py
      hash: md5
      md5: c8928e42307025aedc9fe9f421955056
      size: 2702
  tables@prevalence_overall:
    cmd: "python scripts/prevalence_overall.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/prevalence_overall.py
      hash: md5
      md5: 7ea22e383aad72f66dea53235183966d
      size: 1867
    outs:
    - path: tables/prevalence_overall.csv
      hash: md5
      md5: 52ccf1b4fed49c7195730f11688eb1d3
      size: 392
  tables@prevalence_by_subsite:
    cmd: "python scripts/prevalence_by_subsite.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: f3b752be16fb194b4566e16951f13bf1
      size: 460298
    - path: scripts/prevalence_by_subsite.py
      hash: md5
      md5: ee39d3fe8989bb2a6c7aac2eafa1156d
      size: 1692
    outs:
    - path: tables/prevalence_by_subsite.csv
      hash: md5
      md5: e5125f4bac4325d57f2e668a1403563b
      size: 274
  tables@involvement_combinations:
    cmd: "python scripts/involvement_combinations.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/involvement_combinations.py
      hash: md5
      md5: f82d3e7eb1abd4267c805b3f4493902e
      size: 2942
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: tables/involvement_combinations.csv
      hash: md5
      md5: b8ca3ac3f19707ce6b1752da7d8f3263
      size: 446
  tables@prevalence_stratified:
    cmd: "python scripts/prevalence_stratified.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/prevalence_stratified.py
      hash: md5
      md5: 0cdf789ce85e18b7c39fc223f5948aca
      size: 2411
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: tables/prevalence_stratified.csv
      hash: md5
      md5: c458845231e25b5e232d0eb29abf4af6
      size: 778
  figures@multi_panel_statistics:
    cmd: "python scripts/multi_panel_statistics.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/multi_panel_statistics.py
      hash: md5
      md5: 77c709cb30d01041215ac88446c967fe
      size: 11015
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: figures/multi_panel_statistics.png
      hash: md5
      md5: e9c104834ffac22ce258dd14ae9abb09
      size: 218072
  figures@venn_and_stacked_ece:
    cmd: "python scripts/venn_and_stacked_ece.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    - path: scripts/venn_and_stacked_ece.py
      hash: md5
      md5: 285456666b9d56d095cc64aa358ca959
      size: 6471
    outs:
    - path: figures/venn_and_stacked_ece.png
      hash: md5
      md5: 63e150ac9f023cc775e31e7804a9d31d
      size: 138828
  figures@dissected_vs_positive:
    cmd: "python scripts/dissected_vs_positive.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/dissected_vs_positive.py
      hash: md5
      md5: 1739860ac5847bf653023d53341e4045
      size: 3787
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: figures/dissected_vs_positive.png
      hash: md5
      md5: ef3b26bbd9593634a9d9aaf202736aca
      size: 139771
  figures@contra_by_subsite:
    cmd: "python scripts/contra_by_subsite.py\n"
    deps:
    - path: data/enhanced.csv
      hash: md5
      md5: 67a9e0cf5a72e1074536d850b43f5e38
      size: 456854
    - path: scripts/contra_by_subsite.py
      hash: md5
      md5: 17a720be7b79d6b42bd4dc0374be687f
      size: 3108
    - path: scripts/shared.py
      hash: md5
      md5: 35bf09255dfb9f9f1dd8f9027e73abc9
      size: 2343
    outs:
    - path: figures/contra_by_subsite.png
      hash: md5
      md5: d9eb2aa20efe63c7d2028d7224fb52ed
      size: 49525
